<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åº—å®¶ç™»å…¥ - BrewDate</title>
    <!-- SEO å„ªåŒ– meta æ¨™ç±¤ -->
    <meta name="description" content="BREWDATE å•†å®¶åˆä½œå¹³å° - ç™»å…¥æ‚¨çš„åº—å®¶å¸³æˆ¶ï¼Œç®¡ç†åº—é‹ªè³‡è¨Šï¼Œå¢åŠ åº—é¢æ›å…‰åº¦ã€‚">
    <meta name="keywords" content="BREWDATE, å•†å®¶ç™»å…¥, åº—å®¶å¹³å°, ç´„æœƒå ´æ‰€, åˆä½œå¤¥ä¼´">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="auth.css">
    <link rel="icon" href="logo_s.png" type="image/png">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

   <!-- 1. é¦–å…ˆåŠ è¼‰ reCAPTCHA è…³æœ¬ (éå¸¸é‡è¦) -->
   <script src="https://www.google.com/recaptcha/api.js?render=6Lf0pfMqAAAAAPWeK67sgdduOfMbWeB5w0-0bG6G" 
        async 
        onload="console.log('reCAPTCHA è…³æœ¬åŠ è¼‰æˆåŠŸ', new Date().toISOString())" 
        onerror="console.error('reCAPTCHA è…³æœ¬åŠ è¼‰å¤±æ•—', new Date().toISOString())"></script>
    
   <!-- 2. ç„¶å¾ŒåŠ è¼‰ Firebase å’Œ App Check æ¨¡çµ„ -->
   <script type="module">
       // å…ˆå°å…¥ Firebase é…ç½®
       import './firebase-config.js';
       
       // å°å…¥çµ±ä¸€çš„ App Check æ¨¡çµ„
       import { addDiagnosticsPanel } from './app-check-module.js';
       
       // æ·»åŠ è¨ºæ–·æŒ‰éˆ•
       document.addEventListener('DOMContentLoaded', () => {
           // å‰µå»ºè¨ºæ–·æŒ‰éˆ•
           const diagnosticsBtn = document.createElement('button');
           diagnosticsBtn.id = 'appCheckDiagnosticsBtn';
           diagnosticsBtn.innerHTML = 'ğŸ”';
           diagnosticsBtn.title = 'App Check è¨ºæ–·';
           diagnosticsBtn.style.position = 'fixed';
           diagnosticsBtn.style.bottom = '20px';
           diagnosticsBtn.style.right = '20px';
           diagnosticsBtn.style.width = '50px';
           diagnosticsBtn.style.height = '50px';
           diagnosticsBtn.style.borderRadius = '50%';
           diagnosticsBtn.style.backgroundColor = '#007bff';
           diagnosticsBtn.style.color = 'white';
           diagnosticsBtn.style.border = 'none';
           diagnosticsBtn.style.fontSize = '20px';
           diagnosticsBtn.style.display = 'flex';
           diagnosticsBtn.style.alignItems = 'center';
           diagnosticsBtn.style.justifyContent = 'center';
           diagnosticsBtn.style.cursor = 'pointer';
           diagnosticsBtn.style.zIndex = '9999';
           diagnosticsBtn.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
           
           // æ·»åŠ é»æ“Šäº‹ä»¶
           diagnosticsBtn.addEventListener('click', () => {
               addDiagnosticsPanel();
               diagnosticsBtn.style.display = 'none';
           });
           
           // æ·»åŠ åˆ°é é¢
           document.body.appendChild(diagnosticsBtn);
       });
       
       // å°å…¥å…¶ä»–éœ€è¦çš„æ¨¡çµ„
       import './business-login.js';
   </script>
   
   <!-- æ·»åŠ  App Check ç‹€æ…‹æŒ‡ç¤ºå™¨çš„æ¨£å¼ -->
   <style>
       #appCheckStatus {
           position: fixed;
           top: 10px;
           right: 10px;
           padding: 5px 10px;
           border-radius: 4px;
           font-size: 12px;
           z-index: 9999;
           display: none;
       }
       
       #appCheckStatus.initializing {
           background-color: #ffeeba;
           color: #856404;
           display: block;
       }
       
       #appCheckStatus.success {
           background-color: #d4edda;
           color: #155724;
           display: block;
       }
       
       #appCheckStatus.error {
           background-color: #f8d7da;
           color: #721c24;
           display: block;
       }
   </style>
    
    <script src="error-handler.js"></script>
    
    <style>
         /* å„ªæƒ æ ¸éŠ·å€å¡Š */
         .verification-info {
            margin-top: 30px;
            background-color: #fff;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .verification-info h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .verification-info h4 i {
            margin-right: 10px;
        }
        
        .verification-steps {
            margin-top: 15px;
        }
        
        .verification-step {
            display: flex;
            margin-bottom: 15px;
        }
        
        .step-number {
            width: 25px;
            height: 25px;
            background-color: var(--primary-light);
            color: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-content h5 {
            font-size: 16px;
            margin-bottom: 5px;
            color: var(--dark-color);
        }
        
        .step-content p {
            color: #777;
            font-size: 14px;
            margin-bottom: 0;
        }
        
        .verification-cta {
            margin-top: 20px;
            text-align: center;
        }
        
        .try-verification-btn {
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .try-verification-btn:hover {
            background-color: #86686F;
            transform: translateY(-2px);
            color: white;
        }
    </style>

</head>
<body>
    <!-- åœ¨é é¢é ‚éƒ¨æ·»åŠ  App Check ç‹€æ…‹æŒ‡ç¤ºå™¨ -->
    <div id="appCheckStatus" class="initializing">App Check: åˆå§‹åŒ–ä¸­...</div>
    <!-- å°èˆªæ¬„ -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="logo.png" alt="BREWDATE" height="40">
                BREWDATE
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#home">é¦–é </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#features">ç‰¹è‰²</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#business">å•†å®¶åˆä½œ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#download">ä¸‹è¼‰APP</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#">åº—å®¶ç™»å…¥</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- ç™»å…¥å€å¡Š -->
    <section class="login-section">
        <div class="container login-container">
            <div class="login-card">
                <div class="row g-0">
                    <div class="col-lg-6 d-none d-lg-block">
                        <div class="login-image">
                            <div class="login-image-content">
                                <h2>åŠ å…¥BREWDATE</h2>
                                <p>ç™»å…¥æ‚¨çš„åº—å®¶å¸³æˆ¶å°‡å¯ä»¥äº«å—ï¼š</p>
                                <ul class="benefits-list">
                                    <li><i class="fas fa-check"></i> æ¥è§¸æ›´å¤šé«˜è³ªé‡æ½›åœ¨å®¢æˆ¶</li>
                                    <li><i class="fas fa-check"></i> æé«˜åº—é¢æ›å…‰åº¦å’Œå®¢æµé‡</li>
                                    <li><i class="fas fa-check"></i> ç²å¾—è©³ç´°çš„æ•¸æ“šåˆ†æå ±å‘Š</li>
                                    <li><i class="fas fa-check"></i> è¼•é¬†ç®¡ç†åº—å®¶è³‡è¨Šå’Œå„ªæƒ </li>
                                    <li><i class="fas fa-check"></i> å¢å¼·å“ç‰Œå½¢è±¡èˆ‡å½±éŸ¿åŠ›</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6">
                        <div class="login-form-container">
                            <div class="login-form-header">
                                <h3>åº—å®¶ç®¡ç†å¹³å°</h3>
                                <p>ç®¡ç†åº—é‹ªè³‡è¨Šï¼Œå»ºç«‹å„ªæƒ æ´»å‹•ï¼Œå¸å¼•æ›´å¤šé¡§å®¢</p>
                            </div>
                            
                            <form id="businessLoginForm">
                                <div class="form-group">
                                    <label for="email">é›»å­éƒµä»¶</label>
                                    <input type="email" class="form-control" id="email" placeholder="è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="password">å¯†ç¢¼</label>
                                    <div class="password-field">
                                        <input type="password" class="form-control" id="password" placeholder="è«‹è¼¸å…¥æ‚¨çš„å¯†ç¢¼" required>
                                        <button type="button" class="password-toggle" id="togglePassword">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="login-options">
                                    <div class="remember-me">
                                        <input class="form-check-input" type="checkbox" id="rememberMe">
                                        <label class="form-check-label ms-2" for="rememberMe">
                                            è¨˜ä½æˆ‘çš„å¸³è™Ÿ
                                        </label>
                                    </div>
                                    <a href="#" class="forgot-password">å¿˜è¨˜å¯†ç¢¼ï¼Ÿ</a>
                                </div>
                                
                                <button type="submit" class="btn login-btn w-100">ç™»å…¥</button>
                                <button type="button" class="btn register-btn w-100" id="registerBtn">è¨»å†Šåº—å®¶å¸³æˆ¶</button>
                            </form>
                            
                            <!-- <div class="or-divider">
                                <span>æˆ–ä½¿ç”¨ä»¥ä¸‹æ–¹å¼</span>
                            </div>
                            
                            <div class="social-login">
                                <button type="button" class="social-btn google-btn">
                                    <i class="fab fa-google"></i>
                                </button>
                                <button type="button" class="social-btn facebook-btn">
                                    <i class="fab fa-facebook-f"></i>
                                </button>
                                <button type="button" class="social-btn apple-btn">
                                    <i class="fab fa-apple"></i>
                                </button>
                            </div> -->
                            
                            <div class="login-footer">
                                <p>é‚„æ²’æœ‰å¸³æˆ¶ï¼Ÿ<a href="#" id="signupLink">ç«‹å³è¨»å†Š</a></p>
                                <p>å›åˆ° <a href="index.html">é¦–é </a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å„ªæƒ æ ¸éŠ·è³‡è¨Šå€å¡Šï¼ˆæ–°å¢ï¼‰ -->
            <div class="row mt-5">
                <div class="col-lg-10 mx-auto">
                    <div class="verification-info">
                        <h4><i class="fas fa-ticket-alt"></i> ä¾¿æ·åº—å®¶å„ªæƒ æ ¸éŠ·ç³»çµ±</h4>
                        <p>æˆ‘å€‘å…¨æ–°çš„å„ªæƒ æ ¸éŠ·ç³»çµ±è®“åº—å®¶èƒ½å¤ å¿«é€Ÿã€è¼•é¬†åœ°é©—è­‰ä¸¦æ ¸éŠ·é¡§å®¢çš„å„ªæƒ ï¼Œç„¡éœ€ä¸‹è¼‰é¡å¤–çš„æ‡‰ç”¨ç¨‹å¼ï¼</p>
                        
                        <div class="verification-steps">
                            <div class="verification-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h5>é¡§å®¢å‡ºç¤ºQRç¢¼</h5>
                                    <p>ç•¶é¡§å®¢åˆ°åº—æ¶ˆè²»æ™‚ï¼Œä»–å€‘æœƒåœ¨APPä¸Šå‡ºç¤ºå„ªæƒ QRç¢¼æˆ–6ä½æ•¸é©—è­‰ç¢¼ã€‚</p>
                                </div>
                            </div>
                            
                            <div class="verification-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h5>æƒææˆ–è¼¸å…¥é©—è­‰ç¢¼</h5>
                                    <p>ä½¿ç”¨ä»»ä½•æ‰‹æ©Ÿç›¸æ©ŸæƒæQRç¢¼ï¼Œæˆ–åœ¨ç¶²é ä¸Šè¼¸å…¥é¡¯ç¤ºçš„6ä½æ•¸é©—è­‰ç¢¼ã€‚</p>
                                </div>
                            </div>
                            
                            <div class="verification-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h5>ä¸€éµæ ¸éŠ·å®Œæˆ</h5>
                                    <p>é©—è­‰å¾Œï¼Œç¢ºèªå„ªæƒ è©³æƒ…ä¸¦é»æ“Šä½¿ç”¨æŒ‰éˆ•ï¼Œç³»çµ±è‡ªå‹•è¨˜éŒ„ä½¿ç”¨æƒ…æ³ã€‚</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="verification-cta">
                            <a href="verify.html" class="try-verification-btn">
                                <i class="fas fa-arrow-right me-2"></i>ç«‹å³å˜—è©¦å„ªæƒ æ ¸éŠ·
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- é è…³ -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <div class="footer-info">
                        <h3>BREWDATE</h3>
                        <p>ç”¨ä¸€æ¯å’–å•¡çš„æ™‚é–“ï¼Œæ‰¾åˆ°çœŸå¯¦çš„ç«èŠ±</p>
                        <div class="social-links">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6">
                    <div class="footer-links">
                        <h4>å¿«é€Ÿé€£çµ</h4>
                        <ul>
                            <li><a href="index.html#home">é¦–é </a></li>
                            <li><a href="index.html#features">ç‰¹è‰²</a></li>
                            <li><a href="index.html#business">å•†å®¶åˆä½œ</a></li>
                            <li><a href="index.html#download">ä¸‹è¼‰æ‡‰ç”¨</a></li>
                            <li><a href="index.html#faq">å¸¸è¦‹å•é¡Œ</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="footer-links">
                        <h4>è¯çµ¡æˆ‘å€‘</h4>
                        <ul>
                            <li><i class="fas fa-envelope"></i> <a href="mailto:info@brewdate.com">info@brewdate.com</a></li>
                            <li><i class="fas fa-phone"></i> <a href="tel:+886912345678">+886 912 345 678</a></li>
                            <li><i class="fas fa-map-marker-alt"></i> <span>å°åŒ—å¸‚ä¿¡ç¾©å€æ¾ä»è·¯ 100 è™Ÿ</span></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="footer-newsletter">
                        <h4>åº—å®¶è¨‚é–±</h4>
                        <p>è¨‚é–±æˆ‘å€‘çš„é›»å­å ±ï¼Œç²å–æœ€æ–°çš„æ´»å‹•å’Œåˆä½œä¿¡æ¯</p>
                        <form>
                            <div class="input-group">
                                <input type="email" name="email" class="form-control" placeholder="æ‚¨çš„é›»å­éƒµä»¶">
                                <button class="btn btn-primary" type="submit">è¨‚é–±</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <p>&copy; 2025 BREWDATE. ä¿ç•™æ‰€æœ‰æ¬Šåˆ©.</p>
                    </div>
                    <div class="col-md-6">
                        <div class="footer-bottom-links">
                            <a href="#">éš±ç§æ”¿ç­–</a>
                            <a href="#">ä½¿ç”¨æ¢æ¬¾</a>
                            <a href="#">Cookie æ”¿ç­–</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- åœ¨é é¢æœ€å¾Œæ·»åŠ åˆå§‹åŒ–è…³æœ¬ -->
    <script type="module">
        // å°å…¥å¿…è¦çš„æ¨¡çµ„ï¼Œç¢ºä¿æ­£ç¢ºçš„åˆå§‹åŒ–é †åº
        import { auth, db, appCheck } from './firebase-config.js';
        import { checkAppCheckStatus, addDiagnosticsPanel } from './app-check-module.js';
        import './business-login.js';
        
        // DOM åŠ è¼‰å®Œæˆå¾Œåˆå§‹åŒ– UI å…ƒç´ 
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('é é¢åŠ è¼‰å®Œæˆï¼Œé–‹å§‹è¨­ç½® App Check ç‹€æ…‹æŒ‡ç¤ºå™¨...');
            const statusElement = document.getElementById('appCheckStatus');
            
            try {
                // å»¶é²åŸ·è¡Œæª¢æŸ¥ï¼Œçµ¦ reCAPTCHA è¶³å¤ çš„åŠ è¼‰æ™‚é–“
                setTimeout(async () => {
                    try {
                        const result = await checkAppCheckStatus();
                        if (result.success) {
                            statusElement.className = 'success';
                            statusElement.textContent = 'App Check: å·²é©—è­‰ âœ“';
                            setTimeout(() => { statusElement.style.display = 'none'; }, 3000);
                            
                            // å‰µå»ºè¨ºæ–·æŒ‰éˆ•
                            const diagnosticsBtn = document.createElement('button');
                            diagnosticsBtn.id = 'appCheckDiagnosticsBtn';
                            diagnosticsBtn.innerHTML = 'ğŸ”';
                            diagnosticsBtn.title = 'App Check è¨ºæ–·';
                            
                            // è¨­ç½®æ¨£å¼å’Œäº‹ä»¶...ï¼ˆä¿ç•™åŸæœ‰ä»£ç¢¼ï¼‰
                            
                            diagnosticsBtn.addEventListener('click', () => {
                                addDiagnosticsPanel();
                                diagnosticsBtn.style.display = 'none';
                            });
                            
                            document.body.appendChild(diagnosticsBtn);
                        } else {
                            statusElement.className = 'error';
                            statusElement.textContent = 'App Check: é©—è­‰å¤±æ•— âœ—';
                            setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
                        }
                    } catch (error) {
                        statusElement.className = 'error';
                        statusElement.textContent = 'App Check: ç™¼ç”ŸéŒ¯èª¤ âœ—';
                        console.error('App Check åˆå§‹åŒ–éŒ¯èª¤:', error);
                        setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
                    }
                }, 2000); // å»¶é² 2 ç§’å¾Œæª¢æŸ¥ï¼Œæé«˜æˆåŠŸç‡
            } catch (error) {
                console.error('è¨­ç½®ç‹€æ…‹æŒ‡ç¤ºå™¨æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
            }
        });
    </script>

    <script type="module">
        import { runFullDiagnostics, checkRecaptchaStatus } from './app-check-module.js';
        
        // æ·»åŠ è¨ºæ–·æŒ‰éˆ•
        document.addEventListener('DOMContentLoaded', () => {
            const diagButton = document.createElement('button');
            diagButton.textContent = 'åŸ·è¡Œ App Check è¨ºæ–·';
            diagButton.style.position = 'fixed';
            diagButton.style.bottom = '10px';
            diagButton.style.left = '10px';
            diagButton.style.zIndex = '9999';
            diagButton.style.padding = '10px';
            diagButton.style.backgroundColor = '#4285f4';
            diagButton.style.color = 'white';
            diagButton.style.border = 'none';
            diagButton.style.borderRadius = '4px';
            diagButton.style.cursor = 'pointer';
            
            diagButton.addEventListener('click', () => {
                console.log('æ‰‹å‹•è§¸ç™¼è¨ºæ–·');
                runFullDiagnostics();
            });
            
            document.body.appendChild(diagButton);
        });
        
        // é é¢åŠ è¼‰ 5 ç§’å¾Œè‡ªå‹•æª¢æŸ¥ reCAPTCHA ç‹€æ…‹
        setTimeout(() => {
            console.log('é é¢åŠ è¼‰ 5 ç§’å¾Œè‡ªå‹•æª¢æŸ¥ reCAPTCHA ç‹€æ…‹');
            checkRecaptchaStatus();
        }, 5000);
    </script>

    <script>
        const admin = require('firebase-admin');
        async function setUserAsAdmin(uid) {
            try {
            // å°‡è©²ç”¨æˆ¶çš„ Token åŠ å…¥ role: 'admin'
                await admin.auth().setCustomUserClaims(uid, { role: 'admin' });
                console.log(`å·²å°‡ä½¿ç”¨è€… ${uid} è¨­ç‚º Admin`);
            } catch (error) {
            console.error('è¨­å®šç®¡ç†å“¡å¤±æ•—:', error);
            }
        }
    </script>

</body>
</html>